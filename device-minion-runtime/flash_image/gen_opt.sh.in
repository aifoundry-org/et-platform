#!/bin/bash

#------------------------------------------------------------------------------
# Copyright (C) 2020, Esperanto Technologies Inc.
# The copyright to the computer program(s) herein is the
# property of Esperanto Technologies, Inc. All Rights Reserved.
# The program(s) may be used and/or copied only with
# the written permission of Esperanto Technologies and
# in accordance with the terms and conditions stipulated in the
# agreement/contract under which the program(s) have been supplied.
#------------------------------------------------------------------------------


# Create a blank OTP file
@PROJECT_SOURCE_DIR@/src/ServiceProcessorROM/scripts/sp_otp_editor.py \
   create-blank-otp-file otp.bin

# Set the "VaultIP disable" chicken bit
@PROJECT_SOURCE_DIR@/src/ServiceProcessorROM/scripts/sp_otp_editor.py \
 write-set \
 otp.bin \
 @PROJECT_SOURCE_DIR@/src/ServiceProcessorROM/scripts/sp_otp_template.json "Chicken Bits" "VIP DIS" 1

# Convert to Zebu format
# Will emit 3 files, build/zebu_sp_otp[345].hex
@PROJECT_SOURCE_DIR@/src/sp_otp_convert.py B2Z otp.bin zebu_sp_otp
