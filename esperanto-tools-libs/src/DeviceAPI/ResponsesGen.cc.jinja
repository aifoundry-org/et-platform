/*------------------------------------------------------------------------------
 * Copyright (C) 2019, Esperanto Technologies Inc.
 * The copyright to the computer program(s) herein is the
 * property of Esperanto Technologies, Inc. All Rights Reserved.
 * The program(s) may be used and/or copied only with
 * the written permission of Esperanto Technologies and
 * in accordance with the terms and conditions stipulated in the
 * agreement/contract under which the program(s) have been supplied.
 ------------------------------------------------------------------------------ */

// WARNING: this file is auto-generated do not edit directly

#include "ResponsesGen.h"
#include "Tracing/Tracing.h"

namespace et_runtime {
namespace device_api {
namespace devfw_responses {

<% for msg in cgh.rpc_responses() %>
/// @brief Device API Response << msg['Name'] >>
<% set class_name = cgh.name_to_camelcase(msg['Name']) -%>
<% set msg_name = msg['Name'] -%>

<< class_name >>::<<class_name>>(const ::device_api::non_privileged::<<msg_name>>_t& msg):
   Response(msg)
{
  auto rsp = new et_runtime::tracing::DeviceAPI_rsp_hdr();
  auto cmd_hdr = rsp->mutable_cmd_hdr();
  cmd_hdr->set_command_id(msg.response_info.command_info.command_id);
  cmd_hdr->set_host_timestamp(msg.response_info.command_info.host_timestamp);
  cmd_hdr->set_device_timestamp_mtime(msg.response_info.command_info.device_timestamp_mtime);
  cmd_hdr->set_stream_id(msg.response_info.command_info.stream_id);
  rsp->set_device_timestamp_mtime(msg.response_info.device_timestamp_mtime);

  TRACE_DeviceAPI_RPC_Calls_<<msg_name>>( \
    rsp,
    <% for f in msg['Fields'] -%>
      <%- if f['Type'] == 'enum' %>
    static_cast< et_runtime::tracing::DeviceAPI_RPC_Calls_<<f['Enum']>> >(static_cast<int64_t>(msg.<< f['Name'] >>))
      <%- else %>
    msg.<< f['Name'] >>
      <%- endif %>  <% if not loop.last %>,<% endif %> \
    <% endfor -%>
  );
}

<% endfor %>

} // devfw_responses
} // device_api
} // et_runtime
