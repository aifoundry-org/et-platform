{
    "title": "Esperanto",
    "description": "Esperanto Runtime Tracing Specification",
    "type": "object",
    "properties": {
        "Modules":  {
            "description": "List of different modules we have in the system that we want to enable tracing for",
            "type": "array",
            "items": { "$ref": "#/definitions/Module" }
        },
        "DeviceAPI": { "$ref": "file://@ESPERANTO_DEVICE_API_LIB_DIR@/esperanto/device-api/schema/device-api.schema.json" }
    },
    "required": [ "Modules" ],
    "definitions": {
        "MemberField": {
            "type": "object",
            "description": "A function argument or struct memmber field",
            "properties": {
                "Name": {
                    "type": "string"
                },
                "Type": {
                    "type": "string",
                    "enum": ["double", "float", "int32", "int64", "uint32", "uint64", "sint32",
                             "sint64", "fixed32", "fixed64", "sfixed32", "sfixed64", "bool",
                             "string", "bytes", "struct", "union", "enum"]
                },
                "Struct": {
                    "description": "Name of the struct type to reference",
                    "type": "string"
                },
                "Enum": {
                    "description": "Name of the enum type to reference",
                    "type": "string"
                },
                "Required": {
                    "type": "boolean"
                },
                "Deprecated": {
                    "type": "boolean"
                },
                "Repeated": {
                    "description": "True if the fields repeats in the protobuf schema",
                    "type": "boolean"
                },
                "SrcType": {
                    "description": "Type defined in the original code that we are going to consume",
                    "type": "string"
                }

            },
            "required": ["Name", "Type"]
        },
        "Enum": {
            "type": "object",
            "description": "An Enum definition with list of member values",
            "properties": {
                "Name": {
                    "type":"string"
                },
                "Description": { "type": "string"} ,
                "Values": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "Name": { "type": "string" },
                            "Value": { "type": "integer" }
                        },
                        "required": ["Name", "Value"]
                    }
                }
            },
            "required" : ["Name", "Values"]
        },
        "Struct": {
            "type": "object",
            "description": "A Struct that is comprised of different member fields",
            "properties": {
                "Name": {
                    "type":"string"
                },
                "Description": { "type": "string"} ,
                "Fields": {
                    "type": "array",
                    "items": { "$ref": "#definitions/MemberField" }
                }
            },
            "required" : ["Name", "Fields"]
        },
        "Union": {
            "type": "object",
            "description": "A Union that is comprised of different member fields",
            "properties": {
                "Name": {
                    "type":"string"
                },
                "Description": { "type": "string"} ,
                "Fields": {
                    "type": "array",
                    "items": { "$ref": "#definitions/MemberField" }
                }
            },
            "required" : ["Name", "Fields"]
        },
        "Function": {
            "type": "object",
            "description": "A function that we want to trace",
            "properties": {
                "Name": {
                    "type":"string"
                },

                "EnablePBLogging": {
                    "type": "boolean",
                    "description": "Set to False if you want to disable protobuf tracing support"
                },
                "EnableTextLogging": {
                    "type": "boolean",
                    "description": "Set to False if you want to dsiable GLOG support"
                },
                "Arguments": {
                    "type": "array",
                    "items": { "$ref": "#definitions/MemberField" }
                }
            },
            "required" : ["Name"]
        },
        "Module": {
            "type": "object",
            "description": "Module specification that can describe multiple profiling tracing functions",
            "required": [ "Name", "Functions"],
            "properties": {
                "Name": {
                    "type": "string",
                    "description": "Name of the Module"
                },
                "EnablePBLogging": {
                    "type": "boolean",
                    "description": "Set to False if you want to disable protobuf tracing support"
                },
                "EnableTextLogging": {
                    "type": "boolean",
                    "description": "Set to False if you want to dsiable GLOG support"
                },
                "Enums": {
                    "type": "array",
                    "items": { "$ref": "#definitions/Enum" },
                    "minItems": 1
                },
                "Structs": {
                    "type": "array",
                    "items": { "$ref": "#definitions/Struct" },
                    "minItems": 1
                },
                "Unions": {
                    "type": "array",
                    "items": { "$ref": "#definitions/Union" },
                    "minItems": 1
                },

                "Functions": {
                    "type": "array",
                    "items": { "$ref": "#definitions/Function" },
                    "minItems": 1
                }

            },
            "required": ["Name", "Functions"]
        }
    }
}
