#------------------------------------------------------------------------------
# Copyright (C) 2019, Esperanto Technologies Inc.
# The copyright to the computer program(s) herein is the
# property of Esperanto Technologies, Inc. All Rights Reserved.
# The program(s) may be used and/or copied only with
# the written permission of Esperanto Technologies and
# in accordance with the terms and conditions stipulated in the
# agreement/contract under which the program(s) have been supplied.
#------------------------------------------------------------------------------

set(ESPERANTO_RUNTIME_VERSION 0.1.0)

@PACKAGE_INIT@

set_and_check(ESPERANTO_RUNTIME_INCLUDE_DIR "@PACKAGE_INCLUDE_INSTALL_DIR@")
set_and_check(ESPERANTO_RUNTIME_LIB_DIR "@PACKAGE_LIB_INSTALL_DIR@")

include(CMakeFindDependencyMacro)

# NOTE: do not move these statements earlier as they can overwrite the PACKAGE_PREFIX_DIR variable
find_dependency(absl)
find_dependency(fmt)
# FIXME expect that the sim api is installed next to etruntime
find_dependency(SimulatorAPI
  PATHS "${ESPERANTO_RUNTIME_LIB_DIR}/cmake/SimulatorAPI"
  NO_CMAKE_PATH
  NO_CMAKE_ENVIRONMENT_PATH
  NO_DEFAULT_PATH
  )

message("DIR: ${SimulatorAPI_DIR}")

check_required_components(EsperantoRuntime)

get_filename_component(ESPERANTO_RUNTIME_CMAKE_DIR "${CMAKE_CURRENT_LIST_FILE}" PATH)

# Our library dependencies (contains definitions for IMPORTED targets)
if(NOT TARGET etrt AND NOT TARGET etrt_static)
  include("${ESPERANTO_RUNTIME_CMAKE_DIR}/EsperantoRuntimeTargets.cmake")
endif()

# These are IMPORTED targets created by EsperantoRuntimeTargets.cmake
set(ESPERANTO_RUNTIME_LIBRARIES etrt etrt_static)
# set(FOOBAR_EXECUTABLE bar)
