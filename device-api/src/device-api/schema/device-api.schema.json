{
    "title": "Esperanto",
    "description": "Esperanto Runtime Tracing Specification",
    "type": "object",
    "properties": {
        "Name": {
            "description": "Name of the API",
            "type": "string"
        },
        "Version_Major": {
            "description": "Version Major Number",
            "type" : "integer"
        },
        "Version_Minor": {
            "description": "Version Minor Number",
            "type" : "integer"
        },
        "Version_Patch": {
            "description": "Version Patch Number",
            "type" : "integer"
        },
        "MessageStartID": {
            "description": "Starting ID of the API messages, default 0, used as the stating value of the C-enumeration",
            "type": "integer"
        },
        "MessageMaxID": {
            "description": "Maximum number of messages this API can support, unlimited if not specified",
            "type": "integer"
        },
        "Modules":  {
            "description": "List of different modules we have in the system that we want to enable tracing for",
            "type": "array",
            "items": { "$ref": "#/definitions/Module" }
        }
    },
    "required": [ "Name", "Version_Major", "Version_Minor", "Version_Patch", "Modules"],
    "additionalProperties" : false,
    "definitions": {
        "MemberField": {
            "type": "object",
            "description": "A member field of a struct.",
            "properties": {
                "Name": {
                    "type": "string"
                },
                "Description": { "type": "string"} ,
                "Type": {
                    "type": "string",
                    "enum": ["double", "float", "int8_t", "uint8_t",
                             "int16_t", "uint16_t",
                             "int32_t", "uint32_t",
                             "uint64_t", "uint64_t",
                             "bool", "struct", "enum"]
                },
                "Struct": { "type": "string" },
                "Enum": { "type": "string" }
            },
            "additionalProperties" : false,
            "required": ["Name", "Type"]
        },
        "TraceRecordEntry": {
            "type": "object",
            "description": "A member field of a trace record",
            "properties": {
                "Name": {
                    "type": "string"
                },
                "Description": { "type": "string"} ,
                "Type": {
                    "type": "string",
                    "enum": ["double", "float", "int32_t", "int64_t", "uint32_t", "uint64_t",
                             "bool", "bytes"]
                }
            },
            "additionalProperties" : false,
            "required": ["Name", "Type"]
        },
        "TraceGroupEntry": {
            "type": "object",
            "description": "A member field of a trace group record",
            "properties": {
                "Name": {
                    "type":"string"
                },
                "Description": { "type": "string"} ,
                "Type" : {
                    "type" : "string",
                    "enum" : ["TraceEntry"]
                },
                "Fields": {
                    "type": "array",
                    "items": { "$ref": "#definitions/TraceRecordEntry" }
                }
            },
            "required" : ["Name", "Fields", "Type"]
        },
        "Enum": {
            "type": "object",
            "description": "A Struct that is comprised of different member fields",
            "properties": {
                "Name": {
                    "type":"string"
                },
                "Description": { "type": "string"} ,
                "Type": {
                    "type": "string",
                    "enum": ["double", "float", "int32_t", "int64_t", "uint32_t", "uint64_t",
                             "bool", "bytes", "struct", "enum"]
                },
                "Values": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "Name": { "type": "string" },
                            "Value": { "type": "integer" }
                        },
                        "required": ["Name", "Value"]
                    }
                }
            },
            "additionalProperties" : false,
            "required" : ["Name", "Values", "Type"]
        },
        "Struct": {
            "type": "object",
            "description": "A Struct that is comprised of different member fields",
            "properties": {
                "Name": {
                    "type":"string"
                },
                "Description": { "type": "string"} ,
                "Fields": {
                    "type": "array",
                    "items": { "$ref": "#definitions/MemberField" }
                }
            },
            "additionalProperties" : false,
            "required" : ["Name", "Fields"]
        },
        "Message": {
            "type": "object",
            "description": "A Struct that is comprised of different member fields",
            "properties": {
                "Name": {
                    "type":"string"
                },
                "Description": { "type": "string"} ,
                "Type": {
                    "type": "string",
                    "enum": ["Command", "Response", "Event"]
                },
                "PairedMessage": {
                    "description": "Name of the message that this one is paired with, to be used by commands to denote their replies",
                    "type": "string"
                },
                "Fields": {
                    "type": "array",
                    "items": { "$ref": "#definitions/MemberField" }
                }
            },
            "additionalProperties" : false,
            "required" : ["Name", "Type", "PairedMessage", "Fields"]
        },
        "TraceGroup": {
            "type": "object",
            "description": "Description of a trace-event record",
            "properties": {
                "Name": {
                    "type":"string"
                },
                "Description": { "type": "string"} ,
                "Events": {
                    "type": "array",
                    "items": { "$ref": "#definitions/TraceGroupEntry" }
                }
            },
            "required" : ["Name", "Events"]
        },
        "Module": {
            "type": "object",
            "description": "Module specification that can describe multiple profiling tracing functions",
            "properties": {
                "Name": {
                    "type": "string",
                    "description": "Name of the Module"
                },
                "Description": { "type": "string"} ,
                "Enums": {
                    "type": "array",
                    "items": { "$ref": "#definitions/Enum" },
                    "minItems": 0
                },

                "Structs": {
                    "type": "array",
                    "items": { "$ref": "#definitions/Struct" },
                    "minItems": 0
                },
                "Messages": {
                    "type": "array",
                    "items": { "$ref": "#definitions/Message" },
                    "minItems": 1
                },
                "TraceGroups": {
                    "type": "array",
                    "items": { "$ref": "#definitions/TraceGroup" },
                    "minItems": 1
                }
            },
            "additionalProperties" : false,
            "required": ["Name"]
        }
    }
}
