#------------------------------------------------------------------------------
# Copyright (C) 2019, Esperanto Technologies Inc.
# The copyright to the computer program(s) herein is the
# property of Esperanto Technologies, Inc. All Rights Reserved.
# The program(s) may be used and/or copied only with
# the written permission of Esperanto Technologies and
# in accordance with the terms and conditions stipulated in the
# agreement/contract under which the program(s) have been supplied.
#------------------------------------------------------------------------------

Name: Privileged
Version_Major: 0
Version_Minor: 1
Version_Patch: 0
MessageMaxID: 999
Modules:
- Name: RPC_Calls
  ## List of Enums that are used in our messages
  Enums:
    - Name: et_dma_chan_id
      Description: IDs of the different DMA channels we have on the device.
      Type: uint32_t
      Values:
        - Name: READ_0
          Value: 0
        - Name: READ_1
          Value: 1
        - Name: READ_2
          Value: 2
        - Name: READ_3
          Value: 3
        - Name: WRITE_0
          Value: 4
        - Name: WRITE_1
          Value: 5
        - Name: WRITE_2
          Value: 6
        - Name: WRITE_3
          Value: 7
    - Name: et_dma_state
      Description: State of a DMA
      Type: uint32_t
      Values:
        - Name: IDLE
          Value: 0
        - Name: ACTIVE
          Value: 1
        - Name: DONE
          Value: 2
        - Name: ABORTING
          Value: 3
        - Name: ABORTED
          Value: 4
  # List of Commands, Responses, Events that the RPC
  # Privileged DeviceAPI can exchange with the host
  Messages :
      #-------------------------------------------------------------------------------
    - Name: device_api_version_cmd
      Description:  Request the version of the device_api privileged-level supported
                    by the target, advertise the one we support
      Type: Command
      PairedMessage: device_api_version_rsp
      Fields:
        - Name: major
          Description: Sem Version Major
          Type: uint64_t
        - Name: minor
          Description: Sem Version Minor
          Type: uint64_t
        - Name: patch
          Description: Sem Version Patch
          Type: uint64_t
        - Name: api_hash
          Description: HASH of the API specification. Unique identifier of the
                       API contents.
          Type: uint64_t
    - Name: device_api_version_rsp
      Type: Response
      Description: Return the version implemented by the target
      PairedMessage: device_api_version_cmd
      Fields:
        - Name: major
          Description: Sem Version Major
          Type: uint64_t
        - Name: minor
          Description: Sem Version Minor
          Type: uint64_t
        - Name: patch
          Description: Sem Version Patch
          Type: uint64_t
        - Name: api_hash
          Description: HASH of the API specification. Unique identifier of the
                       API contents implemented by the target.
          Type: uint64_t
        - Name: accept
          Description: Set to true by the target if it can support
                       the version provided by the requestor.
          Type: bool
    #-------------------------------------------------------------------------------
    - Name: reflect_cmd
      Description: Execute the reflect test cmd
      Type: Command
      PairedMessage: reflect_rsp
      Fields:
        - Name: dummy
          Description: Dummy field
          Type: int32_t
    - Name: reflect_rsp
      Description:  Response to reflect test
      Type: Response
      PairedMessage: reflect_cmd
      Fields:
        - Name: dummy
          Description: Dummy field
          Type: int32_t
    #-------------------------------------------------------------------------------
    - Name: dma_run_to_done_cmd
      Description: Execute a DMA on channel until it completes
      Type: Command
      PairedMessage: dma_run_to_done_rsp
      Fields:
        - Name: chan
          Description: DMA channel
          Type: enum
          Enum: et_dma_chan_id
    - Name: dma_run_to_done_rsp
      Description:  Response marking the commpletion of a DMA
      Type: Response
      PairedMessage: dma_run_to_done_cmd
      Fields:
        - Name: chan
          Description: DMA channel
          Type: enum
          Enum: et_dma_chan_id
        - Name: status
          Description: Status of the DMA operation
          Type: enum
          Enum: et_dma_state
